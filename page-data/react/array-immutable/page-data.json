{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/react/array-immutable/",
    "result": {"data":{"posts":{"edges":[{"node":{"id":"dae7236a-bd51-5077-be9d-3553cf985b71","html":"<h1>들어가며</h1>\n<p><a href=\"https://react.vlpt.us/\" target=\"_blank\" rel=\"nofollow\">벨로퍼트와 함께하는 모던 리액트</a>의 <a href=\"https://react.vlpt.us/basic/13-array-insert.html\" target=\"_blank\" rel=\"nofollow\">배열에 항목 추가하기</a>, <a href=\"https://react.vlpt.us/basic/14-array-remove.html\" target=\"_blank\" rel=\"nofollow\">배열에 항목 제거하기</a>와 <a href=\"https://react.vlpt.us/basic/15-array-modify.html\" target=\"_blank\" rel=\"nofollow\">배열 항목 수정하기</a>를 읽고 정리한 글입니다. React에서 <strong>배열 값을 변경할 때 불변성을 유지하는 방법</strong>에 대해 정리했습니다. <strong>배열에서 map 함수를 활용할 때 id 사용 방법과 함수 호출 방식</strong> 예제에 대해 작성했습니다. 사용자의 이름과 이메일을 다루는 예제를 사용했습니다.</p>\n<h1>⭐ 리액트에서 불변성을 지키는 이유</h1>\n<p>불변성을 지켜주어야만 리액트 컴포넌트에서 상태가 업데이트됐음을 감지할 수 있고 이에 따라 필요한 리렌더링이 진행됩니다. 기존 상태를 직접 수정하게 되면, 값을 바꿔도 리렌더링이 되지 않습니다. 리액트에서는 <strong>불변성을 지켜주어야만 컴포넌트 업데이트 성능 최적화</strong>를 제대로 할 수 있습니다.</p>\n<h1>✍ 배열 값 추가하기</h1>\n<p>배열 값을 변경할 때에는 객체와 마찬가지로, 불변성을 지켜주어야 합니다. 배열의 push, splice, sort 등의 함수를 사용하면 안 됩니다. 만약에 사용해야 한다면, 기존의 배열을 한번 복사하고 나서 사용해야 합니다. 불변성을 지키면서 배열에 새 항목을 추가하는 방법은 두 가지가 있습니다. 첫 번째는 <strong>spread 연산자</strong>를 사용하는 것입니다. 두 번째는 <strong>concat 함수</strong>를 사용하는 것입니다.</p>\n<h2>🐥 spread 연산자를 사용하기</h2>\n<p>기존의 배열을 수정하지 않고, 새로운 원소가 추가된 새로운 배열을 만들어줍니다. …users 를 통해 기존 배열을 복사해서 새 배열을 생성했습니다. user 는 복사한 배열에 새 항목을 추가하기 위해 작성했습니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">setUsers([...users, user]);</code>\n        </deckgo-highlight-code>\n<h2>🔗 concat 함수 사용하기</h2>\n<p>concat 에서도 기존의 배열을 수정하지 않고, 새로운 원소가 추가된 새로운 배열을 만들어줍니다. 여러 개의 배열을 하나의 배열로 합칠 때 사용합니다. concat 뒤에 값은 배열이 아닌 값도 넣을 수 있습니다. 새로운 배열을 만든 후 맨 뒤에 user 항목을 추가하는 코드입니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">setUsers(users.concat(user));</code>\n        </deckgo-highlight-code>\n<h3>🔎 App.js Code</h3>\n<p>배열에 새 항목을 추가할 때, 새 항목에서 사용할 고유 id 를 관리하는 용도로 useRef 를 사용했습니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React, { useRef, useState } from &#39;react&#39;;\nimport UserList from &#39;./UserList&#39;;\nimport CreateUser from &#39;./CreateUser&#39;;\n\nfunction App() {\n  const [inputs, setInputs] = useState({\n    username: &#39;&#39;,\n    email: &#39;&#39;,\n  });\n\n  const { username, email } = inputs;\n\n  const onChange = e =&gt; {\n    const { name, value } = e.target;\n\n    setInputs({\n      ...inputs,\n      [name]: value,\n    });\n  };\n\n  const [users, setUsers] = useState([\n    {\n      id: 1,\n      username: &#39;velopert&#39;,\n      email: &#39;public.velopert@gmail.com&#39;,\n    },\n    {\n      id: 2,\n      username: &#39;tester&#39;,\n      email: &#39;tester@example.com&#39;,\n    },\n    {\n      id: 3,\n      username: &#39;liz&#39;,\n      email: &#39;liz@example.com&#39;,\n    },\n  ]);\n\n  const nextId = useRef(4);\n\n  const onCreate = () =&gt; {\n    const user = {\n      id: nextId.current,\n      username,\n      email,\n    };\n\n    setUsers(users.concat(user));\n\n    setInputs({\n      username: &#39;&#39;,\n      email: &#39;&#39;,\n    });\n\n    nextId.current += 1;\n  };\n\n  return (\n    &lt;&gt;\n      &lt;CreateUser\n        username={username}\n        email={email}\n        onChange={onChange}\n        onCreate={onCreate}\n      /&gt;\n      &lt;UserList users={users} /&gt;\n    &lt;/&gt;\n  );\n}\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<h3>🔎 CreateUser.js Code</h3>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React from &#39;react&#39;;\n\nfunction CreateUser({ username, email, onChange, onCreate }) {\n  return (\n    &lt;div&gt;\n      &lt;input\n        name=&quot;username&quot;\n        placeholder=&quot;계정명&quot;\n        onChange={onChange}\n        value={username}\n      /&gt;\n      &lt;input\n        name=&quot;email&quot;\n        placeholder=&quot;이메일&quot;\n        onChange={onChange}\n        value={email}\n      /&gt;\n      &lt;button onClick={onCreate}&gt;등록&lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n\nexport default CreateUser;</code>\n        </deckgo-highlight-code>\n<h3>💻 실행 결과</h3>\n<p><img src=\"https://images.velog.io/images/mnz/post/974b8460-a0bc-4680-9ed7-353b056c8adc/%EB%85%B9%ED%99%94_2021_04_22_21_28_08_421.gif\" alt=\"img\"></p>\n<h1>❌ 배열 값 제거하기</h1>\n<p>불변성을 지키면서 특정 원소를 배열에서 제거하기 위해서는 filter 배열 내장 함수를 사용합니다. 이 함수는 <strong>배열에서 특정 조건이 만족하는 원소들만 추출하여 새로운 배열</strong>을 만들어줍니다.</p>\n<h2>➰ filter 배열 내장 함수 사용하기</h2>\n<p>user.id 값을 onRemove 함수의 파라미터로 넣어서 호출했습니다. user.id 를 파라미터로 사용하여 일치하지 않는 원소만 추출해서 새로운 배열을 만들었습니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">const onRemove = id =&gt; {\n  setUsers(users.filter(user =&gt; user.id !== id));\n};</code>\n        </deckgo-highlight-code>\n<h3>🔎 App.js Code</h3>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React, { useRef, useState } from &#39;react&#39;;\nimport UserList from &#39;./UserList&#39;;\nimport CreateUser from &#39;./CreateUser&#39;;\n\nfunction App() {\n  const [inputs, setInputs] = useState({\n    username: &#39;&#39;,\n    email: &#39;&#39;,\n  });\n\n  const { username, email } = inputs;\n\n  const onChange = e =&gt; {\n    const { name, value } = e.target;\n\n    setInputs({\n      ...inputs,\n      [name]: value,\n    });\n  };\n\n  const [users, setUsers] = useState([\n    {\n      id: 1,\n      username: &#39;velopert&#39;,\n      email: &#39;public.velopert@gmail.com&#39;,\n    },\n    {\n      id: 2,\n      username: &#39;tester&#39;,\n      email: &#39;tester@example.com&#39;,\n    },\n    {\n      id: 3,\n      username: &#39;liz&#39;,\n      email: &#39;liz@example.com&#39;,\n    },\n  ]);\n\n  const nextId = useRef(4);\n\n  const onCreate = () =&gt; {\n    const user = {\n      id: nextId.current,\n      username,\n      email,\n    };\n\n    setUsers(users.concat(user));\n\n    setInputs({\n      username: &#39;&#39;,\n      email: &#39;&#39;,\n    });\n\n    nextId.current += 1;\n  };\n\n  const onRemove = id =&gt; {\n    setUsers(users.filter(user =&gt; user.id !== id));\n  };\n\n  return (\n    &lt;&gt;\n      &lt;CreateUser\n        username={username}\n        email={email}\n        onChange={onChange}\n        onCreate={onCreate}\n      /&gt;\n      &lt;UserList users={users} onRemove={onRemove} /&gt;\n    &lt;/&gt;\n  );\n}\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<h3>🔎 UserList.js Code</h3>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React from &#39;react&#39;;\n\nfunction User({ user, onRemove }) {\n  return (\n    &lt;div&gt;\n      &lt;b&gt;{user.username}&lt;/b&gt; &lt;span&gt;({user.email})&lt;/span&gt;\n      &lt;button onClick={() =&gt; onRemove(user.id)}&gt;삭제&lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n\nfunction UserList({ users, onRemove }) {\n  return (\n    &lt;div&gt;\n      {users.map(user =&gt; (\n        &lt;User user={user} key={user.id} onRemove={onRemove} /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n\nexport default UserList;</code>\n        </deckgo-highlight-code>\n<h3>💻 실행 결과</h3>\n<p><img src=\"https://images.velog.io/images/mnz/post/96adefca-8234-48cb-8acf-c9dbe228a00e/%EB%85%B9%ED%99%94_2021_04_22_21_15_53_52.gif\" alt=\"img\"></p>\n<h1>📝 배열 값 수정하기</h1>\n<p>배열의 불변성을 유지하면서 배열을 업데이트할 때에도 map 함수를 사용할 수 있습니다.</p>\n<h2>🎡 map 함수로 배열 업데이트 하기</h2>\n<p>id 값을 비교해서 id 가 다르다면 그대로 두고, 같다면 active 값을 반전시키도록 구현했습니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">const onToggle = id =&gt; {\n  setUsers(\n    users.map(user =&gt;\n      user.id === id ? { ...user, active: !user.active } : user,\n    ),\n  );\n};</code>\n        </deckgo-highlight-code>\n<h3>🔎 App.js Code</h3>\n<p>User 컴포넌트에 계정명을 클릭했을 때 색상이 초록색으로 바뀌고, 다시 누르면 검은색으로 바뀌는 예제입니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React, { useRef, useState } from &#39;react&#39;;\nimport UserList from &#39;./UserList&#39;;\nimport CreateUser from &#39;./CreateUser&#39;;\n\nfunction App() {\n  const [inputs, setInputs] = useState({\n    username: &#39;&#39;,\n    email: &#39;&#39;,\n  });\n\n  const { username, email } = inputs;\n\n  const onChange = e =&gt; {\n    const { name, value } = e.target;\n\n    setInputs({\n      ...inputs,\n      [name]: value,\n    });\n  };\n\n  const [users, setUsers] = useState([\n    {\n      id: 1,\n      username: &#39;velopert&#39;,\n      email: &#39;public.velopert@gmail.com&#39;,\n      active: true,\n    },\n    {\n      id: 2,\n      username: &#39;tester&#39;,\n      email: &#39;tester@example.com&#39;,\n      active: false,\n    },\n    {\n      id: 3,\n      username: &#39;liz&#39;,\n      email: &#39;liz@example.com&#39;,\n      active: false,\n    },\n  ]);\n\n  const nextId = useRef(4);\n\n  const onCreate = () =&gt; {\n    const user = {\n      id: nextId.current,\n      username,\n      email,\n    };\n\n    setUsers(users.concat(user));\n\n    setInputs({\n      username: &#39;&#39;,\n      email: &#39;&#39;,\n    });\n\n    nextId.current += 1;\n  };\n\n  const onRemove = id =&gt; {\n    setUsers(users.filter(user =&gt; user.id !== id));\n  };\n\n  const onToggle = id =&gt; {\n    setUsers(\n      users.map(user =&gt;\n        user.id === id ? { ...user, active: !user.active } : user,\n      ),\n    );\n  };\n\n  return (\n    &lt;&gt;\n      &lt;CreateUser\n        username={username}\n        email={email}\n        onChange={onChange}\n        onCreate={onCreate}\n      /&gt;\n      &lt;UserList users={users} onRemove={onRemove} onToggle={onToggle} /&gt;\n    &lt;/&gt;\n  );\n}\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<h3>🔎 UserList.js Code</h3>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React from &#39;react&#39;;\n\nfunction User({ user, onRemove, onToggle }) {\n  const { id, username, email, active } = user;\n\n  return (\n    &lt;div&gt;\n      &lt;b\n        style={{\n          color: active ? &#39;green&#39; : &#39;black&#39;,\n          cursor: &#39;pointer&#39;,\n        }}\n        onClick={() =&gt; onToggle(id)}\n      &gt;\n        {username}\n      &lt;/b&gt;{&#39; &#39;}\n      &lt;span&gt;({email})&lt;/span&gt;\n      &lt;button onClick={() =&gt; onRemove(id)}&gt;삭제&lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n\nfunction UserList({ users, onRemove, onToggle }) {\n  return (\n    &lt;div&gt;\n      {users.map(user =&gt; (\n        &lt;User\n          key={user.id}\n          user={user}\n          onRemove={onRemove}\n          onToggle={onToggle}\n        /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n\nexport default UserList;</code>\n        </deckgo-highlight-code>\n<h3>💻 실행 결과</h3>\n<p><img src=\"https://images.velog.io/images/mnz/post/2ba34450-b31f-4319-b154-53d833ab1ce3/%EB%85%B9%ED%99%94_2021_04_22_21_21_10_982.gif\" alt=\"img\"></p>\n<h1>마치며</h1>\n<p>배열에서 map 함수를 활용할 때 id 사용 방법과 함수 호출 방식에 대해 정리했습니다. 배열 관련 추가 내용은 <a href=\"https://react.vlpt.us/basic/13-array-insert.html\" target=\"_blank\" rel=\"nofollow\">배열에 항목 추가하기</a>, <a href=\"https://react.vlpt.us/basic/14-array-remove.html\" target=\"_blank\" rel=\"nofollow\">배열에 항목 제거하기</a>와 <a href=\"https://react.vlpt.us/basic/15-array-modify.html\" target=\"_blank\" rel=\"nofollow\">배열 항목 수정하기</a> 링크에서 확인하실 수 있습니다.</p>\n<hr />\n<h3>참고 자료 📩</h3>\n<ul>\n<li>\n<p><a href=\"https://react.vlpt.us/basic/13-array-insert.html\" target=\"_blank\" rel=\"nofollow\">배열에 항목 추가하기</a></p>\n</li>\n<li>\n<p><a href=\"https://react.vlpt.us/basic/14-array-remove.html\" target=\"_blank\" rel=\"nofollow\">배열에 항목 제거하기</a></p>\n</li>\n<li>\n<p><a href=\"https://react.vlpt.us/basic/15-array-modify.html\" target=\"_blank\" rel=\"nofollow\">배열 항목 수정하기</a></p>\n</li>\n</ul>","timeToRead":5,"frontmatter":{"title":"[React] 배열 값 추가, 제거, 수정하며 불변성 유지하기","summary":"벨로퍼트와 함께하는 모던 리액트의 \"배열에 항목 추가하기\", \"배열에 항목 제거하기\"와 \"배열 항목 수정하기\"를 읽고 정리한 글입니다.","date":"22 April, 2021","category":"React","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACMElEQVQozzWSX2/cRBRHLR5Y2+Px2PPHY3tsx7vr3SRNU0JRStNklXRL1KJAywsqUimE7/8hDloHHo40d6TfmdG9NxpOTrFth7IOZSyFc6iqRlpHqhSJzIllzkJkKKtRlWUhBHGWsUgSEm3Jt2fkdUeuKyK92uL6JbZuqMKArVu0q0nzgjRXSGvI/0M3HuXsLIvFk1CsNsgfrlCXO/KwJNLasRzXrE5OaU/OcKcbzFjj1i1FqIiNJLE5scn5Jo4RSs0PLVKBCAPyzS3ip19Irt+RhpEo05bx/JiTV2f05yPD8yV+Eyj7iuF4zR9fvvJmd8uPVze8fXdP0/dzGxKRIadj5PUdyf5n0qs75PqYKNGa5WrD+tl3hGmiGwfc0UBiDL7r+fPxkS9//c3Xx394+PgbPnR8mwriww8rj7zZk+725K93mBCIEmdomiP65Zom9HP/fDfQDCM+DFTdON8XzlM6T90PjNMWbSyi7cieX5C9ukYvV1S6IEqdJmsn2hfXXL68YLXZcv/hA79//szDx098f/ma/f17dnd7bm7fzueHXz/x4uIlCyER2pHaw7Aqau+JRGVQzUg1nXM0bWmHI4xvyAqDMhWytIhCz3V+WBHtEHlJkimELJCqxBpHFzq6biDKW0+qDFIfggahnsJSu5mD4CCeOdSlpbSeqgnUoaMOPWXbo1xDJhSR9A4Z1vjpGa5uMVUzh/NZdpD8L3siLyzWtzOyMCRhJO4n0tKTSc2/geoIO9g/9cUAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/f28fd7d0dffc3fbb74010925864c5b55/25b42/array-immutable.png","srcSet":"/static/f28fd7d0dffc3fbb74010925864c5b55/f144d/array-immutable.png 183w,\n/static/f28fd7d0dffc3fbb74010925864c5b55/50beb/array-immutable.png 365w,\n/static/f28fd7d0dffc3fbb74010925864c5b55/25b42/array-immutable.png 730w","sizes":"(min-width: 730px) 730px, 100vw"},"sources":[{"srcSet":"/static/f28fd7d0dffc3fbb74010925864c5b55/c97dd/array-immutable.webp 183w,\n/static/f28fd7d0dffc3fbb74010925864c5b55/2772f/array-immutable.webp 365w,\n/static/f28fd7d0dffc3fbb74010925864c5b55/c85f2/array-immutable.webp 730w","type":"image/webp","sizes":"(min-width: 730px) 730px, 100vw"}]},"width":730,"height":365}},"publicURL":"/static/f28fd7d0dffc3fbb74010925864c5b55/array-immutable.png"}}}}]}},"pageContext":{"slug":"/react/array-immutable/"}},
    "staticQueryHashes": ["2368566813","3026479947","3227158195","413061808"]}