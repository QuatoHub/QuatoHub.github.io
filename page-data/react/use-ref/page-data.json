{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/react/use-ref/",
    "result": {"data":{"posts":{"edges":[{"node":{"id":"31130d03-6232-54e8-b523-8c63e16f0ae1","html":"<h1>들어가며</h1>\n<p><a href=\"https://react.vlpt.us/\" target=\"_blank\" rel=\"nofollow\">벨로퍼트와 함께하는 모던 리액트</a>의 <a href=\"https://react.vlpt.us/basic/10-useRef.html\" target=\"_blank\" rel=\"nofollow\">useRef 로 특정 DOM 선택하기</a>, <a href=\"https://react.vlpt.us/basic/12-variable-with-useRef.html\" target=\"_blank\" rel=\"nofollow\">useRef 로 컴포넌트 안의 변수 만들기</a>와 <a href=\"https://react.vlpt.us/basic/13-array-insert.html\" target=\"_blank\" rel=\"nofollow\">배열에 항목 추가하기</a>를 읽고 정리한 글입니다. 사용자에게 이름과 이메일을 입력받는 예제를 사용했습니다. 이 포스팅에서 다루지 않은 상세 설명은 <a href=\"https://mnxmnz.github.io/react/input-immutable/\" target=\"_blank\" rel=\"nofollow\">[React] input 값 불변성 지키며 객체로 관리하기</a>에서 확인하실 수 있습니다.</p>\n<h1>📝 React에서 DOM 선택하는 방법</h1>\n<p>JavaScript 를 사용할 때는, 특정 DOM 을 선택해야 하는 상황에 <code>getElementById</code>, <code>querySelector</code>같은 DOM Selector 함수를 사용해서 DOM 을 선택합니다. 리액트에서는 DOM 을 선택할 때 ref 를 사용합니다. 함수형 컴포넌트에서 ref 를 사용할 때는 useRef 라는 Hook 함수를 사용하고 클래스형 컴포넌트에서는 콜백 함수를 사용하거나 React.createRef 라는 함수를 사용합니다. 이 포스팅에서는 <strong>함수형 컴포넌트의 useRef</strong> 를 사용합니다.</p>\n<h2>🎯 useRef로 DOM 선택하는 방법</h2>\n<p>useRef() 를 사용하여 Ref 객체를 만들고, 이 객체를 선택하고 싶은 DOM 에 ref 값으로 설정합니다. 그러면, Ref 객체의 <code>.current</code>값은 DOM 을 가리키게 됩니다. 이 포스팅에서 다룰 예제에서는 <code>onReset</code>함수에서 <code>input</code>에 포커스를 하는 <code>focus()</code>DOM API 를 호출해주었습니다. 초기화 버튼을 클릭했을 때 이름 <code>input</code>에 포커스가 잡히도록 useRef 를 사용하여 기능을 구현했습니다.</p>\n<h2>✨ 객체 생성하기</h2>\n<p>useRef 를 통해 <code>nameInput</code>이라는 객체를 생성했습니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">const nameInput = useRef();</code>\n        </deckgo-highlight-code>\n<h2>📑 DOM API 사용 방법</h2>\n<p><code>current</code>가 DOM을 가리키고 있으므로 DOM API 중 하나인 <code>focus</code>를 사용했습니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">nameInput.current.focus();</code>\n        </deckgo-highlight-code>\n<h2>📲 DOM 설정을 통해 DOM에 직접 접근하기</h2>\n<p><code>nameInput</code>객체를 선택하고 싶은 DOM 에 설정하여 직접 접근할 수 있습니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">&lt;input\n  name=&quot;name&quot;\n  placeholder=&quot;이름&quot;\n  onChange={onChange}\n  value={name}\n  ref={nameInput}\n/&gt;</code>\n        </deckgo-highlight-code>\n<h3>🔎 InputSample.js Code</h3>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React, { useState, useRef } from &#39;react&#39;;\n\nfunction InputSample() {\n  const [inputs, setInputs] = useState({\n    name: &#39;&#39;,\n    nickname: &#39;&#39;,\n  });\n\n  const nameInput = useRef();\n\n  const { name, nickname } = inputs;\n\n  const onChange = e =&gt; {\n    const { value, name } = e.target;\n\n    setInputs({\n      ...inputs,\n      [name]: value,\n    });\n  };\n\n  const onReset = () =&gt; {\n    setInputs({\n      name: &#39;&#39;,\n      nickname: &#39;&#39;,\n    });\n\n    nameInput.current.focus();\n  };\n\n  return (\n    &lt;div&gt;\n      &lt;input\n        name=&quot;name&quot;\n        placeholder=&quot;이름&quot;\n        onChange={onChange}\n        value={name}\n        ref={nameInput}\n      /&gt;\n      &lt;input\n        name=&quot;nickname&quot;\n        placeholder=&quot;닉네임&quot;\n        onChange={onChange}\n        value={nickname}\n      /&gt;\n      &lt;button onClick={onReset}&gt;초기화&lt;/button&gt;\n      &lt;div&gt;\n        &lt;b&gt;값: &lt;/b&gt;\n        {name} ({nickname})\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n}\n\nexport default InputSample;</code>\n        </deckgo-highlight-code>\n<h3>💻 실행 결과</h3>\n<blockquote>\n<p>초기화 버튼을 클릭했을 때 이름 input 에 포커스가 잡힙니다.</p>\n</blockquote>\n<p><img src=\"https://images.velog.io/images/mnz/post/88cd8d00-fd6a-40cc-af74-54422073ce6b/image.png\" alt=\"img\"></p>\n<h1>🔢 useRef로 컴포넌트 안에서 변수 관리하기</h1>\n<p>useRef Hook 은 DOM 을 선택하는 용도 외에도, 다른 용도가 한 가지 더 있습니다. 컴포넌트 안에서 조회 및 수정할 수 있는 변수를 관리하는 것입니다. <strong>useRef 로 관리하는 변수는 값이 바뀐다고 해서 컴포넌트가 리렌더링되지 않습니다.</strong> 리액트 컴포넌트에서의 상태는 상태를 바꾸는 함수를 호출하고 나서 그다음 렌더링 이후로 업데이트된 상태를 조회할 수 있지만, useRef 로 관리하는 변수는 설정 후 바로 조회할 수 있습니다. 이 변수를 사용하여 다음과 같은 값을 관리할 수 있습니다.</p>\n<ul>\n<li>\n<p><code>setTimeout</code>, <code>setInterval</code>을 통해서 만들어진 <code>id</code></p>\n</li>\n<li>\n<p>외부 라이브러리를 사용하여 생성된 인스턴스</p>\n</li>\n<li>\n<p><code>scroll</code> 위치</p>\n</li>\n</ul>\n<p>새로운 값을 입력받아 배열에 추가하는 예제를 통해 알아보겠습니다.</p>\n<h2>💭 useRef의 파라미터</h2>\n<p>useRef() 를 사용할 때 파라미터를 넣어주면, 이 값이 <code>.current</code>값의 기본값이 됩니다. 그리고 이 값을 수정할 때는 <code>.current</code>값을 수정하면 되고 조회할 때는 <code>.current</code>를 조회하면 됩니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">const nextId = useRef(4);</code>\n        </deckgo-highlight-code>\n<h1>💫 배열 값 변경하기</h1>\n<p>배열 값을 변경할 때에는 객체와 마찬가지로, 불변성을 지켜주어야 합니다. 배열의 push, splice, sort 등의 함수를 사용하면 안 됩니다. 만약에 사용해야 한다면, 기존의 배열을 한번 복사하고 나서 사용해야 합니다. 불변성을 지키면서 배열에 새 항목을 추가하는 방법은 두 가지가 있습니다. 첫 번째는 <strong>spread 연산자</strong>를 사용하는 것입니다. 두 번째는 <strong>concat 함수</strong>를 사용하는 것입니다.</p>\n<h2>🐥 spread 연산자를 사용하기</h2>\n<p>기존의 배열을 수정하지 않고, 새로운 원소가 추가된 새로운 배열을 만들어줍니다. …users 를 통해 기존 배열을 복사해서 새 배열을 생성했습니다. user 는 복사한 배열에 새 항목을 추가하기 위해 작성했습니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">setUsers([...users, user]);</code>\n        </deckgo-highlight-code>\n<h2>🔗 concat 함수 사용하기</h2>\n<p>concat 에서도 기존의 배열을 수정하지 않고, 새로운 원소가 추가된 새로운 배열을 만들어줍니다. 여러 개의 배열을 하나의 배열로 합칠 때 사용합니다. concat 뒤에 값은 배열이 아닌 값도 넣을 수 있습니다. 새로운 배열을 만든 후 맨 뒤에 user 항목을 추가하는 코드입니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">setUsers(users.concat(user));</code>\n        </deckgo-highlight-code>\n<h3>🔎 App.js Code</h3>\n<p>배열에 새 항목을 추가할 때, 새 항목에서 사용할 고유 id 를 관리하는 용도로 useRef 를 사용했습니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React, { useRef, useState } from &#39;react&#39;;\nimport UserList from &#39;./UserList&#39;;\nimport CreateUser from &#39;./CreateUser&#39;;\n\nfunction App() {\n  const [inputs, setInputs] = useState({\n    username: &#39;&#39;,\n    email: &#39;&#39;,\n  });\n\n  const { username, email } = inputs;\n\n  const onChange = e =&gt; {\n    const { name, value } = e.target;\n\n    setInputs({\n      ...inputs,\n      [name]: value,\n    });\n  };\n\n  const [users, setUsers] = useState([\n    {\n      id: 1,\n      username: &#39;velopert&#39;,\n      email: &#39;public.velopert@gmail.com&#39;,\n    },\n    {\n      id: 2,\n      username: &#39;tester&#39;,\n      email: &#39;tester@example.com&#39;,\n    },\n    {\n      id: 3,\n      username: &#39;liz&#39;,\n      email: &#39;liz@example.com&#39;,\n    },\n  ]);\n\n  const nextId = useRef(4);\n\n  const onCreate = () =&gt; {\n    const user = {\n      id: nextId.current,\n      username,\n      email,\n    };\n\n    setUsers(users.concat(user));\n\n    setInputs({\n      username: &#39;&#39;,\n      email: &#39;&#39;,\n    });\n\n    nextId.current += 1;\n  };\n\n  return (\n    &lt;&gt;\n      &lt;CreateUser\n        username={username}\n        email={email}\n        onChange={onChange}\n        onCreate={onCreate}\n      /&gt;\n      &lt;UserList users={users} /&gt;\n    &lt;/&gt;\n  );\n}\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<h3>🔎 CreateUser.js Code</h3>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React from &#39;react&#39;;\n\nfunction CreateUser({ username, email, onChange, onCreate }) {\n  return (\n    &lt;div&gt;\n      &lt;input\n        name=&quot;username&quot;\n        placeholder=&quot;계정명&quot;\n        onChange={onChange}\n        value={username}\n      /&gt;\n      &lt;input\n        name=&quot;email&quot;\n        placeholder=&quot;이메일&quot;\n        onChange={onChange}\n        value={email}\n      /&gt;\n      &lt;button onClick={onCreate}&gt;등록&lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n\nexport default CreateUser;</code>\n        </deckgo-highlight-code>\n<h3>💻 실행 결과</h3>\n<p><img src=\"https://images.velog.io/images/mnz/post/974b8460-a0bc-4680-9ed7-353b056c8adc/%EB%85%B9%ED%99%94_2021_04_22_21_28_08_421.gif\" alt=\"img\"></p>\n<h1>마치며</h1>\n<p>useRef로 DOM 선택하고 변수 관리하는 방법에 대해 정리했습니다. 추가로 배열의 값을 변경할 때 사용하는 spread 연산자와 concat 함수에 대해서도 알아봤습니다. useRef 관련 추가 내용은 <a href=\"https://react.vlpt.us/basic/10-useRef.html\" target=\"_blank\" rel=\"nofollow\">useRef 로 특정 DOM 선택하기</a>, <a href=\"https://react.vlpt.us/basic/12-variable-with-useRef.html\" target=\"_blank\" rel=\"nofollow\">useRef 로 컴포넌트 안의 변수 만들기</a>와 <a href=\"https://react.vlpt.us/basic/13-array-insert.html\" target=\"_blank\" rel=\"nofollow\">배열에 항목 추가하기</a> 링크에서 확인하실 수 있습니다.</p>\n<hr />\n<h3>참고 자료 📩</h3>\n<ul>\n<li>\n<p><a href=\"https://react.vlpt.us/basic/10-useRef.html\" target=\"_blank\" rel=\"nofollow\">useRef 로 특정 DOM 선택하기</a></p>\n</li>\n<li>\n<p><a href=\"https://react.vlpt.us/basic/12-variable-with-useRef.html\" target=\"_blank\" rel=\"nofollow\">useRef 로 컴포넌트 안의 변수 만들기</a></p>\n</li>\n<li>\n<p><a href=\"https://react.vlpt.us/basic/13-array-insert.html\" target=\"_blank\" rel=\"nofollow\">배열에 항목 추가하기</a></p>\n</li>\n</ul>","timeToRead":5,"frontmatter":{"title":"[React] useRef로 DOM 선택하고 변수 관리하기","summary":"벨로퍼트와 함께하는 모던 리액트의 \"useRef 로 특정 DOM 선택하기\", \"useRef 로 컴포넌트 안의 변수 만들기\"와 \"배열에 항목 추가하기\"를 읽고 정리한 글입니다.","date":"21 April, 2021","category":"React","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACHElEQVQozz2RW0/UUBhFG1+Y9vT0tOfS22lLZ6YzDJcBjIpyk5skiBJfTTAY/f//YRlK5GE97rW/7C/oVtvYukFZhzKW1DlUXiKtI1KKUCZMZMKGiFFWo3LLhhBM4piNMCTUlmS5S1I2JDon0LMlrp1iy4rcd9iyRruSKEmJEoW0ZiSxBl0VKGdH2US8CMVsgXx3jPpwTuKnBFo7pv2c2WqberWL215g+hI3r0l9zsRIQpsQmoQ3kwlCqbFoIxII3yFPLhBfvhOe3hD5niDWln69xepol3bd0+1NKRaetHV0yzk/H39xcnbBx5Mzrm5uKdt2nCAUMXLYQp5eEl5/JTq+RM63CEKtmc4WzHcO8MNA03cUfU/sHFXX8fTnL49Pv0fuH35Qtd14YSQkwhXIs2ui82uST+cY7wlCZ6iqTdrpnMo3mLxCFxVZXo4oV1HWDd18oGw6UpsTpxoRS+K6RewdEh+doqczcp0SRE4T1wP1/inv3x6wWG2zs7dm//AQ321yfHbB3bcHbu/u+Xx1gzJuFMYqQ6iMKLNE9vlZOWVREIjcoKqefFizOSyp201sUZFo94rMLEJp4tSQaItMNZFMETJFqgxrHI1vaJqOIKkLImWQ2iJS8xp8lvwXKpO/oHOSzJLZAld5St9Q+pasbsdpYqEIZOGQfk4x7ODKetzwOfwie5G8ynSOTC22qEdkagh9z6QdiLKCWGr+ARF6BTC56Gu5AAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/840de425146926bdb4431d0cdf312f26/25b42/use-ref.png","srcSet":"/static/840de425146926bdb4431d0cdf312f26/f144d/use-ref.png 183w,\n/static/840de425146926bdb4431d0cdf312f26/50beb/use-ref.png 365w,\n/static/840de425146926bdb4431d0cdf312f26/25b42/use-ref.png 730w","sizes":"(min-width: 730px) 730px, 100vw"},"sources":[{"srcSet":"/static/840de425146926bdb4431d0cdf312f26/c97dd/use-ref.webp 183w,\n/static/840de425146926bdb4431d0cdf312f26/2772f/use-ref.webp 365w,\n/static/840de425146926bdb4431d0cdf312f26/c85f2/use-ref.webp 730w","type":"image/webp","sizes":"(min-width: 730px) 730px, 100vw"}]},"width":730,"height":365}},"publicURL":"/static/840de425146926bdb4431d0cdf312f26/use-ref.png"}}}}]}},"pageContext":{"slug":"/react/use-ref/"}},
    "staticQueryHashes": ["2368566813","3026479947","3227158195","413061808"]}