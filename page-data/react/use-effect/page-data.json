{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/react/use-effect/",
    "result": {"data":{"posts":{"edges":[{"node":{"id":"7c9c9b0a-6c84-5e2e-b1e7-dc99f9669f9e","html":"<h1>들어가며</h1>\n<p><a href=\"https://react.vlpt.us/\" target=\"_blank\" rel=\"nofollow\">벨로퍼트와 함께하는 모던 리액트</a>의 <a href=\"https://react.vlpt.us/basic/16-useEffect.html\" target=\"_blank\" rel=\"nofollow\">useEffect를 사용하여 마운트/언마운트/업데이트시 할 작업 설정하기</a>를 읽고 정리한 글입니다. useEffect 라는 Hook 을 사용하여 컴포넌트가 마운트 됐을 때(처음 나타났을 때), 언마운트 됐을 때(사라질 때) 그리고 업데이트될 때(특정 props가 바뀔 때) 특정 작업을 처리하는 방법에 대해 정리했습니다.</p>\n<h1>👀 useEffect 사용 방법</h1>\n<p>useEffect 를 사용할 때에는 첫 번째 파라미터에는 <code>함수</code>, 두 번째 파라미터에는 <code>의존 값이 들어있는 배열 (deps)</code>을 넣습니다. 만약에 deps 배열을 비우게 된다면, 컴포넌트가 처음 나타날 때만 useEffect 에 등록한 함수가 호출됩니다. useEffect 에서는 함수를 반환할 수 있는데 이를 <code>cleanup 함수</code>라고 부릅니다. deps 가 비어있을 때는 컴포넌트가 사라질 때 cleanup 함수가 호출됩니다.</p>\n<h2>😎 마운트 / 언마운트</h2>\n<p>첫 번째 파라미터로 <code>console.log('컴포넌트가 화면에 나타남');</code> 를 포함하고 있는 함수를 작성하고 두 번째 파라미터에는 빈 배열을 deps 로 작성했습니다. 그리고 useEffect 에서 반환하는 cleanup 함수로 <code>console.log('컴포넌트가 화면에서 사라짐');</code> 를 포함하고 있는 함수를 작성했습니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">useEffect(() =&gt; {\n  console.log(&#39;컴포넌트가 화면에 나타남&#39;);\n\n  // cleanup 함수\n  return () =&gt; {\n    console.log(&#39;컴포넌트가 화면에서 사라짐&#39;);\n  };\n}, []);</code>\n        </deckgo-highlight-code>\n<h2>🙄 마운트에 사용하는 작업</h2>\n<ol>\n<li>\n<p>props 로 받은 값을 컴포넌트의 로컬 상태로 설정</p>\n</li>\n<li>\n<p>외부 API 요청 (REST API 등)</p>\n</li>\n<li>\n<p>라이브러리 사용</p>\n</li>\n<li>\n<p><code>setInterval</code>을 통한 반복 작업 혹은 <code>setTimeout</code>을 통한 작업 예약</p>\n</li>\n</ol>\n<h2>😥 언마운트에 사용하는 작업</h2>\n<ol>\n<li>\n<p><code>setInterval</code>, <code>setTimeout</code>을 사용하여 등록한 작업들 clear 하기 (clearInterval, clearTimeout)</p>\n</li>\n<li>\n<p>라이브러리 인스턴스 제거</p>\n</li>\n</ol>\n<h3>🔎 UserList.js Code</h3>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React, { useEffect } from &#39;react&#39;;\n\nfunction User({ user, onRemove, onToggle }) {\n  useEffect(() =&gt; {\n    console.log(&#39;컴포넌트가 화면에 나타남&#39;);\n\n    return () =&gt; {\n      console.log(&#39;컴포넌트가 화면에서 사라짐&#39;);\n    };\n  }, []);\n\n  return (\n    &lt;div&gt;\n      &lt;b\n        style={{\n          cursor: &#39;pointer&#39;,\n          color: user.active ? &#39;green&#39; : &#39;black&#39;,\n        }}\n        onClick={() =&gt; onToggle(user.id)}\n      &gt;\n        {user.username}\n      &lt;/b&gt;\n      &amp;nbsp;\n      &lt;span&gt;({user.email})&lt;/span&gt;\n      &lt;button onClick={() =&gt; onRemove(user.id)}&gt;삭제&lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n\nfunction UserList({ users, onRemove, onToggle }) {\n  return (\n    &lt;div&gt;\n      {users.map(user =&gt; (\n        &lt;User\n          user={user}\n          key={user.id}\n          onRemove={onRemove}\n          onToggle={onToggle}\n        /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n\nexport default UserList;</code>\n        </deckgo-highlight-code>\n<h3>💻 실행 결과</h3>\n<p><img src=\"https://images.velog.io/images/mnz/post/65c727ac-f7eb-441e-aae4-4d64789f32e4/kBFMe8m.png\" alt=\"img\"></p>\n<h1>⭐ deps 에 특정 값 넣기</h1>\n<p><code>deps</code>에 특정 값을 넣게 된다면 컴포넌트가 처음 마운트 될 때도 호출이 되고 지정한 값이 바뀔 때도 호출이 됩니다. 그리고 <code>deps</code>안에 특정 값이 있다면 언마운트시에도 호출이 되고 값이 바뀌기 직전에도 호출이 됩니다. useEffect 안에서 사용하는 상태나 <code>props</code>가 있다면 useEffect 의 <code>deps</code>에 작성해야 useEffect 에 등록한 함수가 실행될 때 <strong>useEffect 안에서 사용하는 상태가 최신 <code>props</code> 상태</strong>를 가리키게 됩니다.</p>\n<h2>🧐 useEffect 안에서 사용하는 상태, props 작성하기</h2>\n<p>첫 번째 파라미터로 <code>console.log('user 값이 설정됨');</code>를 포함하고 있는 함수를 작성하고 두 번째 파라미터에는 <code>user</code>를 <code>deps</code>로 작성했습니다. 그리고 useEffect 에서 반환하는 cleanup 함수로 <code>console.log('user 가 바뀌기 전..');</code>를 포함하고 있는 함수를 작성했습니다. useEffect 에서 <code>user</code>라는 <code>props</code>를 사용하고 있어서 <code>deps</code>에 <code>user</code>를 작성했습니다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">useEffect(() =&gt; {\n  console.log(&#39;user 값이 설정됨&#39;);\n  console.log(user);\n\n  return () =&gt; {\n    console.log(&#39;user 가 바뀌기 전..&#39;);\n    console.log(user);\n  };\n}, [user]);</code>\n        </deckgo-highlight-code>\n<h3>🔎 UserList.js Code</h3>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React, { useEffect } from &#39;react&#39;;\n\nfunction User({ user, onRemove, onToggle }) {\n  useEffect(() =&gt; {\n    console.log(&#39;user 값이 설정됨&#39;);\n    console.log(user);\n\n    return () =&gt; {\n      console.log(&#39;user 가 바뀌기 전..&#39;);\n      console.log(user);\n    };\n  }, [user]);\n  return (\n    &lt;div&gt;\n      &lt;b\n        style={{\n          cursor: &#39;pointer&#39;,\n          color: user.active ? &#39;green&#39; : &#39;black&#39;,\n        }}\n        onClick={() =&gt; onToggle(user.id)}\n      &gt;\n        {user.username}\n      &lt;/b&gt;\n      &amp;nbsp;\n      &lt;span&gt;({user.email})&lt;/span&gt;\n      &lt;button onClick={() =&gt; onRemove(user.id)}&gt;삭제&lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n\nfunction UserList({ users, onRemove, onToggle }) {\n  return (\n    &lt;div&gt;\n      {users.map(user =&gt; (\n        &lt;User\n          user={user}\n          key={user.id}\n          onRemove={onRemove}\n          onToggle={onToggle}\n        /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n\nexport default UserList;</code>\n        </deckgo-highlight-code>\n<h3>💻 실행 결과</h3>\n<p><img src=\"https://images.velog.io/images/mnz/post/dba1730a-7e9b-453e-987c-cf2564ab0c34/d2oJt9L.png\" alt=\"img\"></p>\n<h1>마치며</h1>\n<p>useEffect 라는 Hook 을 사용하여 컴포넌트가 마운트 됐을 때 (처음 나타났을 때), 언마운트 됐을 때 (사라질 때), 그리고 업데이트될 때 (특정 props가 바뀔 때) 특정 작업을 처리하는 방법에 대해 정리했습니다.배열 관련 추가 내용은 <a href=\"https://react.vlpt.us/basic/16-useEffect.html\" target=\"_blank\" rel=\"nofollow\">useEffect를 사용하여 마운트/언마운트/업데이트시 할 작업 설정하기</a> 링크에서 확인하실 수 있습니다.</p>\n<hr />\n<h3>참고 자료 📩</h3>\n<ul>\n<li><a href=\"https://react.vlpt.us/basic/16-useEffect.html\" target=\"_blank\" rel=\"nofollow\">useEffect를 사용하여 마운트/언마운트/업데이트시 할 작업 설정하기</a></li>\n</ul>","timeToRead":3,"frontmatter":{"title":"[React] useEffect 활용하기","summary":"useEffect를 사용하여 컴포넌트가 마운트 됐을 때, 언마운트 됐을 때 그리고 업데이트될 때 특정 작업을 처리하는 방법에 대해 정리했습니다.","date":"02 May, 2021","category":"React","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACJUlEQVQoz2WSW2/TQBCFLV4ae71eey++rZ06idOkTUNBQKE3AW0prVrgFVFa4P//iA/FlXjh4dOMVjpnRmcnGC93sXWDsg5lLKlzqLxEWkekFKFMGMmELRGjrEblli0hGMUxW2FIqC3JzoqkbEh0TqCnO7h2gi0rcj/GljXalURJSpQopDUDiTXoqkA5O5iNxJOhmM6Rr45Qb85I/IRAa8ekmzFd7lIvV7jdOaYrcbOa1OeMjCS0CaFJeDYaIZQaBm1FAuHHyOP3iMs7wpMLIt8RxNrSrRcsD1e0647x/oRi7klbx3gx4/v9T47P3vP2+JSPF5+o2naIIBQxsl8gTz4Qnt8QHX1AzhYEodZMpnNmewf4vqfpxhRdR+wcZdvy8PsPPx4euX/8xe3Xb5RNO2wYCYlwBfL0nOjsnOTdGcZ7gtAZqmqbdjKj8g0mr9BFTeoK8rolyz3dtGeys8QU1ZBxnGpELInrFrH/gvjwBD2ZkuuUIHKauO6pn5/w+uUB8+Uuq/Wavf19Do+Oubq54/LzNedX11zffmGxWhNKhVQaoTKizBLZzWfllEVBIHKDqjryfs12v0PdbmOLikS7AZlZpLYIpYd+eEs1kUwRMkWqDGscjW9omjFBUhdEyjyJUjMI49T8E29uS20wm+pIMktmC1zlKX1D6VuyukW5ilgoAlk4pJ9R9Hu4sh4y3Ij/N3tCphZb1AMyNYS+Y9T2RFlBLDV/ARncBhT0IXGaAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/12dd37b48f9bb7f1ac0e6f8cd8de49a2/25b42/use-effect.png","srcSet":"/static/12dd37b48f9bb7f1ac0e6f8cd8de49a2/f144d/use-effect.png 183w,\n/static/12dd37b48f9bb7f1ac0e6f8cd8de49a2/50beb/use-effect.png 365w,\n/static/12dd37b48f9bb7f1ac0e6f8cd8de49a2/25b42/use-effect.png 730w","sizes":"(min-width: 730px) 730px, 100vw"},"sources":[{"srcSet":"/static/12dd37b48f9bb7f1ac0e6f8cd8de49a2/c97dd/use-effect.webp 183w,\n/static/12dd37b48f9bb7f1ac0e6f8cd8de49a2/2772f/use-effect.webp 365w,\n/static/12dd37b48f9bb7f1ac0e6f8cd8de49a2/c85f2/use-effect.webp 730w","type":"image/webp","sizes":"(min-width: 730px) 730px, 100vw"}]},"width":730,"height":365}},"publicURL":"/static/12dd37b48f9bb7f1ac0e6f8cd8de49a2/use-effect.png"}}}}]}},"pageContext":{"slug":"/react/use-effect/"}},
    "staticQueryHashes": ["2368566813","3026479947","3227158195","413061808"]}